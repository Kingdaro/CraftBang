local function setColors()
	term.setBackgroundColor(colors.gray)
	term.setTextColor(colors.lightGray)
end

setColors()
term.clear()
term.setCursorPos(1,1)

local history = {}

while true do
	setColors()

	local dir = shell.dir()
	local line = string.format("%s> ", dir)
	write(line)

	term.setTextColor(colors.white)
	local input = read(nil, history):match('%s*(.+)%s*')

	history[#history + 1] = input

	if input == 'exit' then
		break
	else
		local params = {}
		for v in input:gmatch('%S+') do
			table.insert(params, v)
		end

		local path = shell.resolveProgram(params[1])
		if path then
			shell.run(unpack(params))
		elseif fs.isDir(params[1]) then
			print(params[1] .. " is a directory.")
		else
			print(params[1].. " does not exist.")
		end
	end
end
