--[[
if not craftbang then
	print "Must be run under CraftBang desktop environment."
	return
end
]]

local function setColors()
	term.setBackgroundColor(colors.gray)
	term.setTextColor(colors.lightGray)
end

setColors()
term.clear()
term.setCursorPos(1,1)

while true do
	setColors()

	local dir = shell.dir()
	local line = string.format("%s> ", dir)
	write(line)

	term.setTextColor(colors.white)
	local input = read():match('%s*(.+)%s*')
	if input == 'exit' then
		break
	else
		local args = {}
		for v in input:gmatch('%S+') do
			table.insert(args, v)
		end

		local program = shell.resolveProgram(args[1])
		if program then
			shell.run(unpack(args))
		elseif fs.isDir(args[1]) then
			print(args[1] .. " is a directory.")
		else
			print(args[1] .. " does not exist.")
		end
	end
end
