if not craftbang then
	print "Must be run under CraftBang desktop environment."
	return
end

local function setColors()
	term.setBackgroundColor(craftbang.colors.background)
	term.setTextColor(craftbang.colors.panel)
end

craftbang.background()
setColors()

while true do
	setColors()

	local dir = shell.dir()
	local line = string.format("%s> ", dir)
	write(line)

	term.setTextColor(colors.white)
	local input = read():match('%s*(.+)%s*')
	if input == 'exit' then
		break
	else
		local path = shell.resolveProgram(input)
		if fs.exists(path) and not fs.isDir(path) then
			shell.run(path)
		else
			if fs.isDir(path) then
				print(path .. " is a directory.")
			else
				print(path .. " does not exist.")
			end
		end
	end
end